{"version":3,"sources":["js/helpers/math.js","js/components/post-list/post/Post.js","js/components/post-list/PostList.js","js/components/infinite-scroll/InfiniteScroll.js","js/index.js"],"names":["random","lower","upper","integer","undefined","Math","floor","Post","id","container","document","createElement","className","header","appendChild","main","footer","img","Image","createPostImage","prototype","objectURL","fetchPostObjectURL","src","self","result","fetch","then","res","handleErrors","blob","window","URL","createObjectURL","catch","err","console","error","status","fetchNewRandomImage","Promise","reject","PostList","element","createManyPosts","amount","i","createSinglePost","post","InfiniteScroll","content","callback","busy","addEventListener","onScroll","bind","scrollTop","offsetHeight","clientHeight","shouldTrigger","setTimeout","onComplete","init","headerEl","querySelector","mainEl","postsEl","footerEl","postList","infiniteScroll","done","removeEventListener"],"mappings":";;AIAA;;AACA;;;ADDA,ADAA,ADAA,ADAA,SGASiD,cAAT,CAAwBxC,SAAxB,EAAmCyC,OAAnC,EAA4CC,QAA5C,EAAsD;AACpD,ACEF,ODFO1C,ECEEqD,IAAT,GDFE,ACEc,GDFGrD,SAAjB;AACA,ADDF,ADCA,AGEE,ODFKyC,CCECa,CHFCxD,IAAT,CEAE,AFAYC,EAAd,AGEgB,CDFC0C,CFAC,CGECxC,KDFjB,GCEyB,CAACsD,aAAT,CAAuB,SAAvB,CAAjB;ADDA,AFAA,AGEA,ODFKb,AFAA3C,CGECyD,CHFN,GAAU,EGEE,CDFZ,AFAA,EGEevD,CDFCyC,OCEO,CDFvB,ACEwBa,aAAT,CAAuB,OAAvB,CAAf;ADDA,AFCA,AGCA,ODFKZ,AFCA3C,CGCCyD,GDFN,GAAY,CCEC,CHDb,EGCgBxD,CDFhB,AFCiBA,OGCO,CHDC,AGCAsD,CHDCrD,YGCV,CHDC,AGCsB,CHDC,KAAvB,CAAjB,CGCgB,CAAhB;ADAA,AFAA,AGCA,ODDKF,AFAAA,CGCC0D,QDDN,AFAA,AGCc,CDDCd,AFAAzC,EGCEF,OHDjB,CGCyB,CAACsD,CHDC,IEA3B,CAAgC,CFAhC,MGCiB,CDDjB,ACCwC,EDDE,KAAKV,ECC9B,CAAjB,KDD0C,CAAcC,IAAd,CAAmB,IAAnB,CAA1C;AACD,ADJD,ADKE,AGCA,OHDK1C,CGCCuD,CFNC1B,IDKP,GAAchC,AGCA,CFNhB,CAAkBiC,CEMC,IAAID,CHDC,CCLxB,ADKyB/B,ECLE,WDKX,CAAuB,CGCpB,CAAauD,GHDhB,CAAd,GGCiB,CAAjB;AFLA,ADKA,AGCA,OFNKvB,ADKA9B,CGCCwD,KHDN,CCLA,ADKYzD,GCLG+B,KEMK,CHDpB,CCLA,CEMuB,CHDC,GGCGM,WHD3B,YGCuB,CAAmBgB,MAAnB,EAA2BC,OAA3B,EAAoCI,IAAI,IAAI;ADHpE,ADFC,ADKA,AGCEF,IAAAA,GFNGxB,ADKAnC,KGCK,CAACmC,GHDX,CAAe9B,KCLf,CAAqB,CAArB,IDKA,AGCE,CHDyB,AGCA,CAAzB,IHD8BD,MAAhC;ACJD,ADMC,AGAEyD,IAAAA,GHAGvD,CGAC,GHAN,GAAYL,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AEHFsC,AFIE,AGAC,GAHsB,CAAvB,GHGKlC,IAAL,CAAUH,EEJE,CAACQ,MFIb,GEJF,AFIwB,CEJCkC,QAAzB,GAAoC,AFIlC,YEJ6C;AAC7C,ADJD,ADQC,ADHK,AIILvB,EAAAA,IJJW/B,CCGNS,CEJC+C,ACKA,CAACe,GJJU,GAAG,CCGpB,ADHqBtE,CGDN,AFIAa,GEJG,CHCE,EAAQZ,EGDLO,GFIvB,ADHoB,AIIpB,CHD2B,AGCA,CJJQN,IGDjB,AFIcY,CEJCyC,EHCb,CCGpB,IDH+C,EGD/C,GCKA,EAA+CM,IAA/C;ADJA,AFKA,ADJA7D,AIID,EJJCA,KCIKe,ADJA,CGDCyC,EHCExD,GCIR,EDJa,CCICS,IELI,AHCAN,GGDG,CFKC,CAACO,GELGF,CHClB,GAAsB,CAAtB,GAA0BR,CGDb,CAAewD,AFKtB,CAAuB,EDJrC,GCIc,CAAd,KELA;AACA,ADJFf,ADSE,ADJAxC,EAAAA,KCIKc,ADJA,CGDC0C,ADJA,CAACtC,CFKClB,GCIR,CAAYU,CDJC,GELf,CAAmBgC,CCIC,AHCAxC,GGDG,AFKrB,GAAwB,EELE8C,CHClB,GAAsB,CAAtB,CELV,CCIuB,CAAaQ,AHCAxD,CELC,GDSnC,CDJA,MEL4C2C,CCI5C,KDJmC,EAAiB;ACKpD,ADJA,ADSA,ADHA,AICD,MJDK7C,CENC,ADSAS,CELCkD,GDJGb,CAAC,AFMA,GENG,AFMA3C,CENb,ADSA,CAAeW,CCTCgC,CAAC,ECIE,CDJCD,AFMA,EGFEW,CHGlBvD,GEPJ,ADSA,CAA2B,CCTC6C,AFOnB,CEPoB,ECIE,ADJ/B,AFOYzC,CCEoBW,CCTC,CCICyC,CHGlB,CAACnD,ECEjB,GDFY,CAAWD,IGHD,AHGK,CAACL,GGHsB0D,GHG3B,MAAiBxD,GGHxC,EHG6C,GAAGD,KAAR,GAAgB,CAAjC,CAAX,CADQ,GAEhBA,KAAK,GAAGI,IAAI,CAACL,MAAL,MAAiBE,KAAK,GAAGD,KAAzB,CAFZ;AELE,ADUF,ADDA,AIDF8B,MAAM,CHECd,AGFAoC,EFREN,AFSA/C,CCCP,GAAW,EDDX,ECCekB,KAAJ,CGFb,CHEE,AGFsB,CFRpB,iBEQJ,EAA4C4C,IAA5C;ADHE,ADJC,ADUD,ADDD,CATM,KGID,CFMC/C,IENIqC,AFMT,CAAUtC,GENV,EAAe,MFMf,CAAsB,KAAKG,GAA3B;AELE,ADJH,ADWC,CCfF,MDeOE,eAAL;AENC,AFQD,SAAO,KAAKV,SAAZ;ACXFiC,ADYC,QCZO,CAACtB,SAAT,CAAmB2B,gBAAnB,GAAsC,YAAW;ACK/C,ADJA,MCIIY,EDJEnD,EAAE,GAAG,MCIX,EAAmB,UDJD,CAAP,EAAU,IAAV,EAAgB,IAAhB,CAAX;ACKE,ADJF,ADUD,QCVOwC,CCICI,GDJG,CCIR,EDJW,CCIC,GDJG7C,CCIf,YDJW,CAASC,EAAT,CAAb;ACMEoD,ADLF,ICKEA,GDLGjB,OCKO,ADLZ,CCKa,ADLA7B,MCKM,KDLnB,CAAyBkC,IAAzB;ACMI,ADLL,ADUDzC,CCdA,GDcI,CAACa,MELM+B,GFKX,CAAehC,IELT,CAAc,KAAK0C,KFKzB,GAAiC,EELb,CAAgBN,IAAhB,CAAqB,IAArB,CAAd,KFK4C;AEJ7C,AFKH,KEPY,EAEP,CFKClC,EEPM,CAAV,MFOa,GAAG,MAAM,KAAKC,kBAAL,EAAxB;AEJC,AFKD,OAAKL,GAAL,CAASM,GAAT,CCVamB,EDUErB,SAAf;AEJD,AFKA,CEtBD,AFmBA;;AEAA4B,AFKA1C,IAAI,CAACa,SELS,AFKd,CELeA,AFKAE,SELf,CAAyBuC,QFKzB,EELA,CFKoC,EELE,UFKU,EELC;AAC/C,AFKA,OELKT,CFKC5B,GELN,CFKU,EELE,CFKC,IELb,AFKA;AEJA,AFKA,OELK8B,CFKC9C,EAAE,GAAG,EELX,GFKgBA,EAAhB;AEJD,AFMC,CETF,OFSQiB,MAAM,GAAGC,KAAK,CAAE,4BAA2BlB,EAAG,UAAhC,CAAL,CACZmB,IADY,CACPC,GAAG,IAAIC,YAAY,CAACD,GAAD,CADZ,EAEZD,IAFY,CAEPC,GAAG,IAAIA,GAAG,CAACE,IAAJ,EAFA,EAGZH,IAHY,CAGPC,GAAG,IAAIG,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BL,GAA3B,CAHA,EAIZM,KAJY,CAINC,GAAG,IAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAJD,CAAf;;AAMA,WAASN,IEVIoB,QFUb,CAAsBrB,GAAtB,EAA2B;AACzB,QAAIA,GAAG,CAACU,MAAJ,KAAe,GAAnB,EAAwB;AACtBC,MAAAA,mBAAmB;AACnB,aAAOC,OAAO,CAACC,MAAR,CAAgB,kBAAiBjC,EAAG,sBAApC,CAAP;AACD;;AAED,WAAOoB,GAAP;AACD;;AAAA;;AAED,WAASW,mBAAT,GAA+B;AAC7Bf,IAAAA,IAAI,CAAChB,EAAL,GAAU,kBAAO,CAAP,EAAU,IAAV,EAAgB,IAAhB,CAAV;AACAgB,IAAAA,IAAI,CAACL,eAAL;AACD;;AAAA;AAED,SAAOM,MAAP;AACD,CAzBD;;eA2BelB","file":"js.00a46daa.js","sourceRoot":"../src","sourcesContent":["/**\n * Produces a random number between the `lower` and `upper` bounds.\n * If no argument is provided a floating-point number between `0` and `1`\n * is returned. If `integer` is `true`, an integer is returned instead\n * of a floating-point number.\n *\n * @param {number} lower The lower bound.\n * @param {number} upper The upper bound.\n * @param {boolean} integer Specify returning an integer.\n * @returns {number} Returns the random number.\n */\nexport const random = (lower, upper, integer) => {\n  lower = lower === undefined ? 0 : lower;\n  upper = upper === undefined ? 1 : upper;\n\n  let random = integer\n    ? lower + Math.floor(Math.random() * (upper - lower + 1))\n    : lower + Math.random() * (upper - lower);\n\n  return random;\n};","import { random } from '../../../helpers/math';\n\nfunction Post(id) {\n  this.id = 200;\n\n  this.container = document.createElement('div');\n  this.container.className = 'post';\n\n  this.header = document.createElement('div');\n  this.header.className = 'post__header';\n  this.container.appendChild(this.header);\n\n  this.main = document.createElement('div');\n  this.main.className = 'post__main';\n  this.container.appendChild(this.main);\n\n  this.footer = document.createElement('div');\n  this.footer.className = 'post__footer';\n  this.container.appendChild(this.footer);\n\n  this.img = new Image();\n  this.main.appendChild(this.img);\n\n  this.createPostImage();\n\n  return this.container;\n};\n\nPost.prototype.createPostImage = async function() {\n  const objectURL = await this.fetchPostObjectURL();\n  this.img.src = objectURL;\n};\n\nPost.prototype.fetchPostObjectURL = function () {\n  const self = this;\n  const id = this.id;\n\n  const result = fetch(`https://picsum.photos/id/${id}/400/430`)\n    .then(res => handleErrors(res))\n    .then(res => res.blob())\n    .then(res => window.URL.createObjectURL(res))\n    .catch(err => console.error(err));\n\n  function handleErrors(res) {\n    if (res.status === 404) {\n      fetchNewRandomImage();\n      return Promise.reject(`Resource at ID ${id} could not be found.`);\n    }\n\n    return res;\n  };\n\n  function fetchNewRandomImage() {\n    self.id = random(0, 1000, true);\n    self.createPostImage();\n  };\n\n  return result;\n};\n\nexport default Post;","import Post from './post/Post';\nimport { random } from '../../helpers/math';\n\nfunction PostList(element) {\n  this.element = element;\n  this.createManyPosts(3);\n};\n\nPostList.prototype.createManyPosts = function(amount) {\n  for (var i = 0; i < amount; i++) {\n    this.createSinglePost();\n  }\n};\n\nPostList.prototype.createSinglePost = function() {\n  const id = random(0, 1000, true);\n  const post = new Post(id);\n  this.element.appendChild(post);\n};\n\nexport default PostList;","function InfiniteScroll(container, content, callback) {\n  this.container = container;\n  this.content = content;\n  this.callback = callback;\n  this.busy = false;\n\n  this.container.addEventListener('scroll', this.onScroll.bind(this));\n};\n\nInfiniteScroll.prototype.onScroll = function() {\n  const scrollTop = this.container.scrollTop;\n  const offsetHeight = this.container.offsetHeight;\n  const clientHeight = this.content.clientHeight;\n  const shouldTrigger = scrollTop + offsetHeight >= clientHeight;\n\n  if (this.busy) {\n    return;\n  }\n\n  if (shouldTrigger) {\n    this.busy = true;\n\n    setTimeout(() => {\n      this.callback(this.onComplete.bind(this));\n    }, 500);\n  }\n};\n\nInfiniteScroll.prototype.onComplete = function() {\n  this.busy = false;\n  this.onScroll();\n};\n\nexport default InfiniteScroll;","import PostList from './components/post-list/PostList';\nimport InfiniteScroll from './components/infinite-scroll/InfiniteScroll';\n\nfunction init() {\n  const headerEl = document.querySelector('#header');\n  const mainEl = document.querySelector('#main');\n  const postsEl = document.querySelector('#posts');\n  const footerEl = document.querySelector('#footer');\n\n  const postList = new PostList(postsEl);\n  const infiniteScroll = new InfiniteScroll(mainEl, postsEl, done => {\n    postList.createManyPosts(3);\n    done();\n  });\n\n  window.removeEventListener('DOMContentLoaded', init);\n};\n\nwindow.addEventListener('DOMContentLoaded', init);"]}