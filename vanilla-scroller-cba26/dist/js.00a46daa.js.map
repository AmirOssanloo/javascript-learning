{"version":3,"sources":["js/utils/math.js","js/components/post-list/post/Post.js","js/components/post-list/PostList.js","js/components/infinite-scroll/InfiniteScroll.js","js/index.js"],"names":["random","lower","upper","integer","undefined","Math","floor","norm","number","limit","clamp","lerp","map","sourceLower","sourceUpper","targetLower","targetUpper","Post","id","container","document","createElement","className","header","appendChild","main","footer","img","Image","createPostImage","prototype","objectURL","fetchPostObjectURL","src","self","result","fetch","then","res","handleErrors","blob","window","URL","createObjectURL","catch","err","console","error","status","fetchNewRandomImage","Promise","reject","PostList","element","createManyPosts","amount","i","createSinglePost","post","InfiniteScroll","content","callback","busy","addEventListener","onScroll","bind","scrollTop","offsetHeight","clientHeight","shouldTrigger","setTimeout","onComplete","init","headerEl","querySelector","mainEl","postsEl","footerEl","postList","infiniteScroll","done","removeEventListener"],"mappings":";;AIAA;;AACA;;;ADDA,ADAA,ADAA,ADAO,MAAMA,GGAJ2D,GHAU,GAAG,CAAC1D,KAAD,EGAtB,AHA8BC,CGANiB,IHAF,EAAehB,GGArC,EAAmCyD,EHAb,KGAtB,AHAiD,EGALC,QAA5C,EAAsD;AACpD,ACEF,AJFE5D,EAAAA,KGAKkB,AHAA,EIEEqD,CJFCvE,GIEV,EJFe,CGAb,ACEc,GDFGkB,CHACf,QGAlB,CHAQ,GAAsB,CAAtB,GAA0BH,KAAlC;AGCA,ADDF,ADCA,AGEE,AJFAC,EAAAA,KGAK0D,AHAA,CIECa,CHFCxD,CDACf,GCAV,CEAE,AFAYgB,CDAC,CCAf,AGEgB,CDFC0C,CFAC,CGECxC,CJFChB,IGAlB,GCEyB,CAACsE,CJFlB,GAAsB,CAAtB,GAA0BxE,KIEjB,AJFjB,CIEwC,SAAvB,CAAjB;ADDA,AFAA,AGEA,AJDA,MAAIF,CGDC6D,AFAA3C,CGECyD,CHFN,GAAUzD,ADCA,ECDV,AGEY,CDFZ,AHCaf,EICEiB,CDFCyC,IHCI,GICG,AJAnB5D,CGFJ,ACEwByE,IJAf,GAAGrE,IAAI,CAACC,CIAF,CAAuB,GJA1B,CAAWD,GIAR,CAAf,AJA2B,CAACL,MAAL,MAAiBE,KAAK,GAAGD,KAAR,GAAgB,CAAjC,CAAX,CADQ,GAEhBA,KAAK,GAAGI,IAAI,CAACL,MAAL,MAAiBE,KAAK,GAAGD,KAAzB,CAFZ;AGAA,AFCA,AGCA,AJEA,OGJK6D,AFCA3C,CGCCyD,CJEC5E,EGJP,GAAY,CCEC,AJEb,CCHA,EGCgBoB,CDFhB,AFCiBA,OGCO,CHDC,AGCAsD,CHDCrD,YGCV,CHDC,AGCsB,CHDC,KAAvB,CAAjB,CGCgB,CAAhB;ADAA,AFAA,AGCA,AJED,CATM,MGMAF,AFAAA,CGCC0D,QDDN,AFAA,AGCc,CDDCd,AFAAzC,EGCEF,OHDjB,CGCyB,CAACsD,CHDC,IEA3B,CAAgC,CFAhC,MGCiB,CDDjB,ACCwC,EDDE,KAAKV,ECC9B,CAAjB,KDD0C,CAAcC,IAAd,CAAmB,IAAnB,CAA1C;AACD,ADJD,ADKE,AGCA,OHDK1C,CGCCuD,CFNC1B,IDKP,GAAchC,AGCA,CFNhB,CAAkBiC,CEMC,IAAID,CHDC,CCLxB,ADKyB/B,ECLE,WDKX,CAAuB,CGCpB,CAAauD,GHDhB,CAAd,GGCiB,CAAjB;AFLA,ADKA,AGCA,OFNKvB,ADKA9B,CGCCwD,KHDN,CCLA,ADKYzD,GCLG+B,KEMK,CHDpB,CCLA,CEMuB,CHDC,GGCGM,WHD3B,YGCuB,CAAmBgB,MAAnB,EAA2BC,OAA3B,EAAoCI,IAAI,IAAI;ADHpE,ADFC,ADKA,AGCEF,IAAAA,GFNGxB,ADKAnC,KGCK,CAACmC,GHDX,CAAe9B,KCLf,CAAqB,CAArB,IDKA,AGCE,CHDyB,AGCA,CAAzB,IHD8BD,MAAhC;ACJD,ADMC,AGAEyD,AJDG,IICHA,EJDSzE,CCCNkB,CGAC,EJDS,CCCf,EDDkB,CCCNL,ADDOZ,MAAD,ECCE,ADDOP,CCCNoB,IDDH,EAAgBnB,KAAhB,ECCN,ADD6BO,CCCN,IDDjB,CCCN,CAAZ,GDDmD;AGFrDkD,AFIE,AGAC,AJDDnD,EAAAA,CIFuB,CAAvB,GHGKiB,CDDC,GCCN,ADDS,CCCCH,ADDAd,EGHE,CAACsB,GHGG,GCChB,ADDmB7B,GGHrB,AFIwB,CEJC+D,CHGd,KAAoB9D,EGH/B,GAAoC,AFIlC,ADDkC,GAAGD,KAA5B,CAAT,GGH6C;AAC7C,ADJD,ADQC,AGCAwC,AJFAjC,EIEAiC,AJFAjC,KCCKW,CEJC+C,ACKA,AJFA,CIECe,EJFExE,KCCT,ADDc,CGHC,AFIAe,EDDEd,CGHC,IHGI,CGHCS,AHGAX,GCCvB,AGCA,CHD2B,AGCA,EJFL,EAAS,CGHb,AFIciB,ADDV,CGHWyC,CHGC,CAAZ,CCCtB,ADDc,GAAyB1D,GGHvC,GCKA,AJFA,EIE+CgE,IAA/C;ADJA,AFKA,AGAD,AJFC,OCEK9C,CELCyC,CHGC3D,ICEP,EDFA,CCEcY,IELI,GAAG,CFKC,CAACC,GELGF,SAAL,CAAegD,AFKtB,CAAuB,KAAvB,CAAd,KELA;AACA,ADJFf,ADSE,ADFD,CAJM,MCMA1B,CELC0C,ADJA,CAACtC,IDSP,CAAYR,ICTd,CAAmBgC,CCIC,GAAG,AFKrB,GAAwB,EELEM,MDJ5B,CCIuB,CAAaQ,CDJC,GDSnC,OCT4Cb,CCI5C,KDJmC,EAAiB;ACKpD,ADJA,ADSA,AGFD,OFPM,ADSApC,CELCkD,GDJGb,CAAC,GAAG,CAAb,ADSA,CAAehC,CCTCgC,CAAC,ECIE,CDJCD,ECIEW,IDJtB,ADSA,CAA2B,CCTCV,CAAC,ECIE,ADJ/B,CDSgC9B,CCTC,CCICyC,IFKlC,QELsB,IAA4BC,YAAlD;ADHE,ADUF,AGFF3B,MAAM,CHECd,AGFAoC,EFREN,CDUP,GAAW,IAAI7B,KAAJ,CGFb,CHEE,AGFsB,CFRpB,iBEQJ,EAA4C4C,IAA5C;ADHE,ADJC,ADUD,MENI,CFMC/C,IENIqC,AFMT,CAAUtC,GENV,EAAe,MFMf,CAAsB,KAAKG,GAA3B;AELE,ADJH,ADWC,ADNK,CETP,KFSahB,CCMNkB,GDNU,GAAG,CAACrB,MAAD,ECMlB,ADN2BP,KAAT,EAAgBC,KAAhB,EAAuBO,KAAvB,KAAiC;AGAlD,AFQD,ADPAD,EAAAA,MAAM,CCOC,EDPE,CAACN,ECOEiB,GDPG,GAAGlB,GCOlB,EDPS,IAAkBO,MAAlB,GAA2BP,KAApC;AEJFmD,ADYC,ADPC5C,EAAAA,MELM,AFKA,CELCsB,EFKErB,KAAK,EELhB,CAAmBgD,AFKA/C,KAAK,CAACF,MAAD,EAASP,EELjC,GAAsC,AFKd,EAAgBC,KAAhB,CAAR,GAAiCM,CELA,KFK/C;AGAA,ADJA,AFKA,MGDI6D,EDJEnD,CFKCV,CELC,GAAG,EFKX,IGDA,EAAmB,UDJD,CAAP,EAAU,IAAV,EAAgB,IAAhB,CAAX;ACKE,ADJF,ADUD,ADLA,CAJM,OEDCkD,CCICI,GDJG,CCIR,EDJW,CCIC,GDJG7C,CCIf,YDJW,CAASC,EAAT,CAAb;ACMEoD,ADLF,ICKEA,GDLGjB,OCKO,ADLZ,CCKa,ADLA7B,MCKM,KDLnB,CAAyBkC,IAAzB;ACMI,ADLL,ADUDzC,CCdA,GDcI,CAACa,MELM+B,GFKX,CAAehC,IELT,CAAc,KAAK0C,KFKzB,GAAiC,EELb,CAAgBN,IAAhB,CAAqB,IAArB,CAAd,KFK4C;AEJ7C,AFKH,KEPY,EAEP,CFKClC,EEPM,CAAV,MFOa,GAAG,MAAM,KAAKC,kBAAL,EAAxB;AEJC,AFKD,ADPK,MAAMtB,CCONiB,GAAL,CAASM,ADPO,GCOhB,ADPmB,CEHNmB,AFGO5C,ECOLuB,IDPI,EAAS9B,GCO5B,EDPmB,EAAgBC,KAAhB,KAA0B;AGG9C,AFKA,ADPCM,CGfF,AFmBA,CDJEA,MAAM,GAAGA,MAAM,IAAIN,KAAV,GAAkBM,MAAlB,GAA2BN,KAApC;AACAM,EAAAA,MAAM,GAAGA,MAAM,IAAIP,KAAV,GAAkBO,MAAlB,GAA2BP,KAApC;AGGF0D,AFKA1C,ADPE,ICOE,CAACa,IDPItB,KGEK,AFKd,CELesB,AFKAE,ADPb,SGEF,CAAyBuC,QFKzB,EELA,CFKoC,EELE,UFKU,EELC;AAC/C,AFKA,ADPD,CAJM,MGMAT,CFKC5B,GELN,CFKU,EELE,CFKC,IELb,AFKA;AEJA,AFKA,OELK8B,CFKC9C,EAAE,GAAG,EELX,GFKgBA,EAAhB;AEJD,AFMC,CETF,OFSQiB,MAAM,GAAGC,KAAK,CAAE,4BAA2BlB,EAAG,UAAhC,CAAL,CACZmB,IADY,CACPC,GAAG,IAAIC,YAAY,CAACD,GAAD,CADZ,EAEZD,IAFY,CAEPC,GAAG,IAAIA,GAAG,CAACE,IAAJ,EAFA,EAGZH,IAHY,CAGPC,GAAG,IAAIG,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BL,GAA3B,CAHA,EAIZM,KAJY,CAINC,GAAG,IAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAJD,CAAf;;AAMA,ADdK,MAAMjC,GAAG,ECcL2B,CDdQ,CAAC/B,EGILmD,IHJI,EAAS9C,ECc1B,CAAsByB,GAAtB,EAA2B,GDdV,EAAsBxB,WAAtB,EAAmCC,WAAnC,EAAgDC,WAAhD,EAA6DN,KAA7D,KAAuE;ACetF,ADdFF,EAAAA,MCcM8B,ADdA,GCcG,ADdA/B,CCcCyC,GDdG,CAACxC,ECcR,IDdO,CCcQ,CDdCK,ECcpB,EAAwB,ODdb,EAAsBC,WAAtB,EAAmCJ,KAAnC,CAAb;ACeIuC,ADdJzC,EAAAA,ICcIyC,EDdE,GAAGtC,IAAI,CAACH,MAAD,EAASO,CCcC,UDdV,EAAsBC,WAAtB,EAAmCN,KAAnC,CAAb;ACeI,ADdJ,SAAOF,ICcI0C,EDdX,KCckB,CAACC,MAAR,CAAgB,kBAAiBjC,EAAG,sBAApC,CAAP;AACD,ADdJ,CAJM;;ACoBH,WAAOoB,GAAP;AACD;;AAAA;;AAED,WAASW,mBAAT,GAA+B;AAC7Bf,IAAAA,IAAI,CAAChB,EAAL,GAAU,kBAAO,CAAP,EAAU,IAAV,EAAgB,IAAhB,CAAV;AACAgB,IAAAA,IAAI,CAACL,eAAL;AACD;;AAAA;AAED,SAAOM,MAAP;AACD,CAzBD;;eA2BelB","file":"js.00a46daa.js","sourceRoot":"../src","sourcesContent":["export const random = (lower, upper, integer) => {\n  lower = lower === undefined ? 0 : lower;\n  upper = upper === undefined ? 1 : upper;\n\n  let random = integer\n    ? lower + Math.floor(Math.random() * (upper - lower + 1))\n    : lower + Math.random() * (upper - lower);\n\n  return random;\n};\n\nexport const norm = (number, lower, upper, limit) => {\n  number = (number - lower) / (upper - lower);\n  number = limit ? clamp(number, 0, 1) : number;\n  return number;\n};\n\nexport const lerp = (number, lower, upper, limit) => {\n  number = (upper - lower) * number + lower;\n  number = limit ? clamp(number, lower, upper) : number;\n  return number;\n};\n\nexport const clamp = (number, lower, upper) => {\n  number = number <= upper ? number : upper;\n  number = number >= lower ? number : lower;\n  return number;\n};\n\nexport const map = (number, sourceLower, sourceUpper, targetLower, targetUpper, clamp) => {\n  number = norm(number, sourceLower, sourceUpper, clamp);\n  number = lerp(number, targetLower, targetUpper, clamp);\n  return number;\n};\n","import { random } from '../../../utils/math';\n\nfunction Post(id) {\n  this.id = id;\n\n  this.container = document.createElement('div');\n  this.container.className = 'post';\n\n  this.header = document.createElement('div');\n  this.header.className = 'post__header';\n  this.container.appendChild(this.header);\n\n  this.main = document.createElement('div');\n  this.main.className = 'post__main';\n  this.container.appendChild(this.main);\n\n  this.footer = document.createElement('div');\n  this.footer.className = 'post__footer';\n  this.container.appendChild(this.footer);\n\n  this.img = new Image();\n  this.main.appendChild(this.img);\n\n  this.createPostImage();\n\n  return this.container;\n};\n\nPost.prototype.createPostImage = async function() {\n  const objectURL = await this.fetchPostObjectURL();\n  this.img.src = objectURL;\n};\n\nPost.prototype.fetchPostObjectURL = function () {\n  const self = this;\n  const id = this.id;\n\n  const result = fetch(`https://picsum.photos/id/${id}/400/430`)\n    .then(res => handleErrors(res))\n    .then(res => res.blob())\n    .then(res => window.URL.createObjectURL(res))\n    .catch(err => console.error(err));\n\n  function handleErrors(res) {\n    if (res.status === 404) {\n      fetchNewRandomImage();\n      return Promise.reject(`Resource at ID ${id} could not be found.`);\n    }\n\n    return res;\n  };\n\n  function fetchNewRandomImage() {\n    self.id = random(0, 1000, true);\n    self.createPostImage();\n  };\n\n  return result;\n};\n\nexport default Post;","import Post from './post/Post';\nimport { random } from '../../utils/math';\n\nfunction PostList(element) {\n  this.element = element;\n  this.createManyPosts(3);\n};\n\nPostList.prototype.createManyPosts = function(amount) {\n  for (var i = 0; i < amount; i++) {\n    this.createSinglePost();\n  }\n};\n\nPostList.prototype.createSinglePost = function() {\n  const id = random(0, 1000, true);\n  const post = new Post(id);\n  this.element.appendChild(post);\n};\n\nexport default PostList;","function InfiniteScroll(container, content, callback) {\n  this.container = container;\n  this.content = content;\n  this.callback = callback;\n  this.busy = false;\n\n  this.container.addEventListener('scroll', this.onScroll.bind(this));\n};\n\nInfiniteScroll.prototype.onScroll = function() {\n  const scrollTop = this.container.scrollTop;\n  const offsetHeight = this.container.offsetHeight;\n  const clientHeight = this.content.clientHeight;\n  const shouldTrigger = scrollTop + offsetHeight >= clientHeight;\n\n  if (this.busy) {\n    return;\n  }\n\n  if (shouldTrigger) {\n    this.busy = true;\n\n    setTimeout(() => {\n      this.callback(this.onComplete.bind(this));\n    }, 500);\n  }\n};\n\nInfiniteScroll.prototype.onComplete = function() {\n  this.busy = false;\n  this.onScroll();\n};\n\nexport default InfiniteScroll;","import PostList from './components/post-list/PostList';\nimport InfiniteScroll from './components/infinite-scroll/InfiniteScroll';\n\nfunction init() {\n  const headerEl = document.querySelector('#header');\n  const mainEl = document.querySelector('#main');\n  const postsEl = document.querySelector('#posts');\n  const footerEl = document.querySelector('#footer');\n\n  const postList = new PostList(postsEl);\n  const infiniteScroll = new InfiniteScroll(mainEl, postsEl, done => {\n    postList.createManyPosts(3);\n    done();\n  });\n\n  window.removeEventListener('DOMContentLoaded', init);\n};\n\nwindow.addEventListener('DOMContentLoaded', init);"]}